<!DOCTYPE html>
<html>
<head>
  <title>Botones On/Off con Difuminado</title>
  <style>
    /* Estilos existentes para botones e imágenes */
    button {
      background: none;
      border: none;
      cursor: pointer;
    }

    img {
      width: 100px; /* Ajusta el tamaño según tus imágenes */
      height: 100px;
    }

    /* Animación de difuminado */
    img {
      transition: filter 2s ease;
    }

    img[alt="Off"] {
      filter: blur(0.1px);
    }
  </style>
</head>
<body>
  <button id="toggleButton1">
    <img id="buttonImage1" src="/img/iconmiui12/sis/status_bar_toggle_bluetooth_off.png" alt="Off"> 
  </button>

  <button id="toggleButton2">
    <img id="buttonImage2" src="/img/iconmiui12/sis/status_bar_toggle_wifi_off.png" alt="Off"> 
  </button>

  <button id="toggleButton3">
    <img id="buttonImage3" src="/img/iconmiui12/sis/status_bar_toggle_data_off.png" alt="Off"> 
  </button>

  <script>
    const buttons = [
      { button: document.getElementById('toggleButton1'), image: document.getElementById('buttonImage1'), stateKey: 'buttonState1', onImage: '/img/iconmiui12/sis/status_bar_toggle_bluetooth_on.png', offImage: '/img/iconmiui12/sis/status_bar_toggle_bluetooth_off.png' },
      { button: document.getElementById('toggleButton2'), image: document.getElementById('buttonImage2'), stateKey: 'buttonState2', onImage: '/img/iconmiui12/sis/status_bar_toggle_wifi_on.png', offImage: '/img/iconmiui12/sis/status_bar_toggle_wifi_off.png' },
      { button: document.getElementById('toggleButton3'), image: document.getElementById('buttonImage3'), stateKey: 'buttonState3', onImage: '/img/iconmiui12/sis/status_bar_toggle_data_on.png', offImage: '/img/iconmiui12/sis/status_bar_toggle_data_off.png' }
    ];

    buttons.forEach(buttonData => {
      let isOn = localStorage.getItem(buttonData.stateKey) === 'on';

      if (isOn === null) {
        isOn = true;
        localStorage.setItem(buttonData.stateKey, 'on');
      }

      if (isOn) {
        buttonData.image.src = buttonData.onImage;
        buttonData.image.alt = 'On';
      } else {
        buttonData.image.src = buttonData.offImage;
        buttonData.image.alt = 'Off';
      }

      buttonData.button.addEventListener('click', () => {
        isOn = !isOn;
        localStorage.setItem(buttonData.stateKey, isOn ? 'on' : 'off');

        if (isOn) {
          buttonData.image.src = buttonData.onImage;
          buttonData.image.alt = 'On';
        } else {
          buttonData.image.src = buttonData.offImage;
          buttonData.image.alt = 'Off';
        }
      });
    });
  </script>
</body>
</html>
